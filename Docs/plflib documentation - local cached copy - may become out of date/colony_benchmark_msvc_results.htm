<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <meta name="description" content="PLF C++ Library - plf::colony">
  <meta name="keywords"
  content="C++, C, vector, colony, plf::colony, speed, OO, containers, optimize, performance, pointer, iterator, invalidation, benchmarks, results, benchmark, vs, versus, std::list, std::map, std::multiset, std::vector, std::deque, deque">
  <title>PLF C++ Library - plf::colony - MSVC benchmarks</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<a href="index.htm">Home</a>

<h1>PLF C++ Library - plf::colony - MSVC benchmarks</h1>

<p style="font-size: 75%"><i>Last updated 4-11-2016 v3.81</i></p>
<ol>
  <li><a href="#testsetup">Test setup</a></li>
  <li><a href="#rawperformance">Raw performance benchmarks (against standard
    containers)</a></li>
  <li><a href="#comparitiveperformance">Comparitive performance benchmarks
    (against modified standard containers)</a></li>
  <li><a href="#lowmodification">Low-modification scenario test</a></li>
  <li><a href="#highmodification">High-modification scenario test</a></li>
  <li><a href="#overall">Overall performance conclusions</a></li>
</ol>

<h4><a id="testsetup"></a>Test machine setup</h4>

<p>The test setup is a Haswell-class Xeon on an Intel motherboard, 16GB ECC ram, running MSVC 2015 update 3
x64 as compiler. OS is a stripped-back Windows 7 x64 SP1 installation with most
services, background tasks (including explorer) and all networking disabled.
Build settings are "/O2 /Oi /Ot /Oy /GL". The
source code for the benchmarks can be found in the colony page <a
href="http://www.plflib.org/colony.htm#download">downloads</a> section, as can further details about the test designs. Lastly, because MSVC's deque implementation is not good, we've skipped the heavy-referencing tests for MSVC, and packed_deque in the comparitive tests (this's been replaced with std::list in case anyone's interested in the performance of that). In order to not duplicate effort and conclusions, commentary is left for the GCC results (with the exception of some small overall comclusions).</p>

<h3><a id="rawperformance"></a>Raw performance tests</h3>


<h4>Insertion Performance</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/char_insertion.png';"
onmouseout="this.src='tests/msvc/colony/raw/char_insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/char_insertion.png';"
src="tests/msvc/colony/raw/char_insertion_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/int_insertion.png';"
onmouseout="this.src='tests/msvc/colony/raw/int_insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/int_insertion.png';"
src="tests/msvc/colony/raw/int_insertion_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/double_insertion.png';"
onmouseout="this.src='tests/msvc/colony/raw/double_insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/double_insertion.png';"
src="tests/msvc/colony/raw/double_insertion_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/small_struct_insertion.png';"
onmouseout="this.src='tests/msvc/colony/raw/small_struct_insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/small_struct_insertion.png';"
src="tests/msvc/colony/raw/small_struct_insertion_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/large_struct_insertion.png';"
onmouseout="this.src='tests/msvc/colony/raw/large_struct_insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/large_struct_insertion.png';"
src="tests/msvc/colony/raw/large_struct_insertion_log.png"><br>



<h4>Erase Performance</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/char_erase_25.png';"
onmouseout="this.src='tests/msvc/colony/raw/char_erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/char_erase_25.png';"
src="tests/msvc/colony/raw/char_erase_25_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/int_erase_25.png';"
onmouseout="this.src='tests/msvc/colony/raw/int_erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/int_erase_25.png';"
src="tests/msvc/colony/raw/int_erase_25_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/double_erase_25.png';"
onmouseout="this.src='tests/msvc/colony/raw/double_erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/double_erase_25.png';"
src="tests/msvc/colony/raw/double_erase_25_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/small_struct_erase_25.png';"
onmouseout="this.src='tests/msvc/colony/raw/small_struct_erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/small_struct_erase_25.png';"
src="tests/msvc/colony/raw/small_struct_erase_25_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/large_struct_erase_25.png';"
onmouseout="this.src='tests/msvc/colony/raw/large_struct_erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/large_struct_erase_25.png';"
src="tests/msvc/colony/raw/large_struct_erase_25_log.png"><br>


<h4>Post-erasure Iteration Performance</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/char_iteration.png';"
onmouseout="this.src='tests/msvc/colony/raw/char_iteration_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/char_iteration.png';"
src="tests/msvc/colony/raw/char_iteration_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/int_iteration.png';"
onmouseout="this.src='tests/msvc/colony/raw/int_iteration_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/int_iteration.png';"
src="tests/msvc/colony/raw/int_iteration_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/double_iteration.png';"
onmouseout="this.src='tests/msvc/colony/raw/double_iteration_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/double_iteration.png';"
src="tests/msvc/colony/raw/double_iteration_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/small_struct_iteration.png';"
onmouseout="this.src='tests/msvc/colony/raw/small_struct_iteration_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/small_struct_iteration.png';"
src="tests/msvc/colony/raw/small_struct_iteration_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/raw/large_struct_iteration.png';"
onmouseout="this.src='tests/msvc/colony/raw/large_struct_iteration_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/raw/large_struct_iteration.png';"
src="tests/msvc/colony/raw/large_struct_iteration_log.png"><br>


<h3><a id="comparitiveperformance"></a>Comparative performance tests</h3>



<h4>Insertion</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/insertion.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/insertion_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/insertion.png';"
src="tests/msvc/colony/comparitive/insertion_log.png"><br>


<h4>Erasure</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/erase_25.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/erase_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/erase_25.png';"
src="tests/msvc/colony/comparitive/erase_25_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/erase_50.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/erase_50_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/erase_50.png';"
src="tests/msvc/colony/comparitive/erase_50_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/erase_75.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/erase_75_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/erase_75.png';"
src="tests/msvc/colony/comparitive/erase_75_log.png"><br>


<h4>Post-erasure Iteration</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/iteration_0.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/iteration_0_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/iteration_0.png';"
src="tests/msvc/colony/comparitive/iteration_0_log.png"><br>


<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/iteration_25.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/iteration_25_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/iteration_25.png';"
src="tests/msvc/colony/comparitive/iteration_25_log.png"><br>


<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/iteration_50.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/iteration_50_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/iteration_50.png';"
src="tests/msvc/colony/comparitive/iteration_50_log.png"><br>


<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/comparitive/iteration_75.png';"
onmouseout="this.src='tests/msvc/colony/comparitive/iteration_75_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/comparitive/iteration_75.png';"
src="tests/msvc/colony/comparitive/iteration_75_log.png"><br>


<h3><a id="lowmodification"></a>'Real-world' scenario testing - low
modification</h3>


<p><i>Click images or hover over to see results at linear scale instead</i></p>

<h4>Performance results</h4>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_1.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_1_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_1.png';"
src="tests/msvc/colony/general_use/per_minute_1_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_5.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_5_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_5.png';"
src="tests/msvc/colony/general_use/per_minute_5_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_10.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_10_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_10.png';"
src="tests/msvc/colony/general_use/per_minute_10_log.png"><br>


<p></p>

<h4>Memory results</h4>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_mem_1.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_mem_1_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_mem_1.png';"
src="tests/msvc/colony/general_use/per_minute_mem_1_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_mem_5.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_mem_5_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_mem_5.png';"
src="tests/msvc/colony/general_use/per_minute_mem_5_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_minute_mem_10.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_minute_mem_10_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_minute_mem_10.png';"
src="tests/msvc/colony/general_use/per_minute_mem_10_log.png"><br>


<h3><a id="highmodification"></a>'Real-world' scenario testing - high
modification</h3>

<h4>Performance results</h4>

<p><i>Click images or hover over to see results at linear scale instead</i></p>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_1.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_1_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_1.png';"
src="tests/msvc/colony/general_use/per_frame_1_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_5.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_5_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_5.png';"
src="tests/msvc/colony/general_use/per_frame_5_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_10.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_10_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_10.png';"
src="tests/msvc/colony/general_use/per_frame_10_log.png"><br>


<p></p>

<h4>Memory results</h4>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_mem_1.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_mem_1_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_mem_1.png';"
src="tests/msvc/colony/general_use/per_frame_mem_1_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_mem_5.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_mem_5_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_mem_5.png';"
src="tests/msvc/colony/general_use/per_frame_mem_5_log.png"><br>
<img alt="test result graph"
onmouseover="this.src='tests/msvc/colony/general_use/per_frame_mem_10.png';"
onmouseout="this.src='tests/msvc/colony/general_use/per_frame_mem_10_log.png';"
style="cursor: pointer;"
onclick="this.src='tests/msvc/colony/general_use/per_frame_mem_10.png';"
src="tests/msvc/colony/general_use/per_frame_mem_10_log.png"><br>



<h3>Overall Performance Conclusions</h3>

<p>For the most part MSV's results are similar to GCC's, with the exception of deque, which performs poorly, and vector, which slightly outperform's GCC's vector for iteration and erase performance, but underperforms by comparison for insertion performance. The end result is much the same, although we cannot compare packed_deque results.</p>

<p>Using a boolean skipfield in combination with a vector or deque is of course
a no-go, due to it's poor iteration performance once the number of erasures
increases. Similarly, using an erasable iteration field as was used with
indexed_vector and pointer_deque results in both wasteful memory consumption
and poor performance once the number of modifications or elements becomes too
high, but may be more-than-adequate at low-modification levels without too much differential in terms of memory usage.</p>

<p>In short, where both the rate of modification is &gt;=
10% of all elements per 3600 frames and the number of elements is &gt;= 9000,
and where unordered, often-inserted/erased content is required,
use a colony.</p>


<p>Contact: <img alt="footer" src="footer.gif"><br>
plf:: library and this page Copyright (c) 2016, Matthew Bentley</p>
</body>
</html>
